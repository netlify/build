# Snapshot report for `packages/build/tests/edge_handlers/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://avajs.dev).

## constants.EDGE_HANDLERS_SRC default value

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/src_default␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/src_default␊
    ␊
    > Config file␊
      packages/build/tests/edge_handlers/fixtures/src_default/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/edge_handlers/fixtures/src_default␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    undefined␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## constants.EDGE_HANDLERS_SRC automatic value

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/src_auto␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/src_auto␊
    ␊
    > Config file␊
      packages/build/tests/edge_handlers/fixtures/src_auto/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/src_auto/netlify/edge-handlers␊
        publish: packages/build/tests/edge_handlers/fixtures/src_auto␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify/edge-handlers␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      2. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Edge Handlers were found in netlify/edge-handlers directory␊
    ␊
    (@netlify/plugin-edge-handlers onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## constants.EDGE_HANDLERS_SRC relative path

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/src_relative␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/src_relative␊
    ␊
    > Config file␊
      packages/build/tests/edge_handlers/fixtures/src_relative/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/src_relative/custom-edge-handlers␊
        publish: packages/build/tests/edge_handlers/fixtures/src_relative␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    custom-edge-handlers␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      2. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Edge Handlers were found in custom-edge-handlers directory␊
    ␊
    (@netlify/plugin-edge-handlers onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## constants.EDGE_HANDLERS_SRC missing path

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/src_missing␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/src_missing␊
    ␊
    > Config file␊
      packages/build/tests/edge_handlers/fixtures/src_missing/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/src_missing/missing␊
        publish: packages/build/tests/edge_handlers/fixtures/src_missing␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    missing false␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      2. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Plugin "@netlify/plugin-edge-handlers" failed                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: Edge Handlers directory does not exist: packages/build/tests/edge_handlers/fixtures/src_missing/missing␊
    ␊
      Plugin details␊
      Package:        @netlify/plugin-edge-handlers␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/netlify-plugin-edge-handlers.git␊
      npm link:       https://www.npmjs.com/package/@netlify/plugin-edge-handlers␊
      Report issues:  https://github.com/netlify/netlify-plugin-edge-handlers/issues␊
    ␊
      Error location␊
      In "onBuild" event in "@netlify/plugin-edge-handlers" from core␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/src_missing/missing␊
        publish: packages/build/tests/edge_handlers/fixtures/src_missing␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin`

## constants.EDGE_HANDLERS_SRC created dynamically

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: /tmp-dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      /tmp-dir␊
    ␊
    > Config file␊
      /tmp-dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: /tmp-dir␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      2. ./plugin (onBuild event)                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify/edge-handlers␊
    ␊
    (./plugin onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      3. ./plugin (onPostBuild event)                               ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPostBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## constants.EDGE_HANDLERS_SRC dynamic is ignored if EDGE_HANDLERS_SRC is specified

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: /tmp-dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      /tmp-dir␊
    ␊
    > Config file␊
      /tmp-dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: /tmp-dir/test␊
        publish: /tmp-dir␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin from netlify.toml␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      2. ./plugin (onBuild event)                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      3. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Edge Handlers were found in test directory␊
    ␊
    (@netlify/plugin-edge-handlers onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## Edge handlers: simple setup

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/simple␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/simple␊
    ␊
    > Config file␊
      No config file was defined: using default values.␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/simple/netlify/edge-handlers␊
        publish: packages/build/tests/edge_handlers/fixtures/simple␊
        publishOrigin: default␊
    ␊
    > Context␊
      production␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    Packaging Edge Handlers from netlify/edge-handlers directory:␊
     - test␊
    ␊
    (@netlify/plugin-edge-handlers onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`

## Edge handlers: can configure directory

> Snapshot 1

    `␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/edge_handlers/fixtures/custom_dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/edge_handlers/fixtures/custom_dir␊
    ␊
    > Config file␊
      packages/build/tests/edge_handlers/fixtures/custom_dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        edge_handlers: packages/build/tests/edge_handlers/fixtures/custom_dir/custom-edge-handlers␊
        publish: packages/build/tests/edge_handlers/fixtures/custom_dir␊
        publishOrigin: default␊
    ␊
    > Context␊
      production␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      1. @netlify/plugin-edge-handlers (onBuild event)              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    Packaging Edge Handlers from custom-edge-handlers directory:␊
     - test␊
    ␊
    (@netlify/plugin-edge-handlers onBuild completed in 1ms)␊
    ␊
    ────────────────────────────────────────────────────────────────␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)`
