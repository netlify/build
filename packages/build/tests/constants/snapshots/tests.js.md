# Snapshot report for `packages/build/tests/constants/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://avajs.dev).

## constants.CONFIG_PATH

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/config_path␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/config_path␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/config_path/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/config_path␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify.toml␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.PUBLISH_DIR default value

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/publish_default␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/publish_default␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/publish_default/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/publish_default␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    . true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.PUBLISH_DIR default value with build.base

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/publish_default_base␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/publish_default_base/base␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/publish_default_base/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        base: packages/build/tests/constants/fixtures/publish_default_base/base␊
        publish: packages/build/tests/constants/fixtures/publish_default_base/base␊
        publishOrigin: config␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: /external/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /external/path from netlify.toml␊
    ␊
      1. /external/path (onPreBuild event)                               ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    . true␊
    ␊
    (/external/path onPreBuild completed in 1ms)␊
    Build step duration: /external/path onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.PUBLISH_DIR absolute path

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/publish_absolute␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/publish_absolute␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/publish_absolute/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/publish_absolute/doesNotExist␊
        publishOrigin: config␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    doesNotExist␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.PUBLISH_DIR relative path

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/publish_relative␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/publish_relative␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/publish_relative/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/publish_relative/publish␊
        publishOrigin: config␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    publish␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.PUBLISH_DIR missing path

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/publish_missing␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/publish_missing␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/publish_missing/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/publish_missing/publish␊
        publishOrigin: config␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    publish false␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC default value

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_default␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_default␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_default/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_default␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    undefined␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC uses legacy default functions directory if it exists

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_legacy␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_legacy␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_legacy/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_legacy␊
        publishOrigin: default␊
      functionsDirectory: packages/build/tests/constants/fixtures/functions_src_legacy/netlify-automatic-functions␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify-automatic-functions␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Functions were found in netlify-automatic-functions directory␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC ignores the legacy default functions directory if the new default directory exists

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_default_and_legacy␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_default_and_legacy␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_default_and_legacy/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_default_and_legacy␊
        publishOrigin: default␊
      functionsDirectory: packages/build/tests/constants/fixtures/functions_src_default_and_legacy/netlify/functions␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify/functions␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Functions were found in netlify/functions directory␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC relative path

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_relative␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_relative␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_relative/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_relative␊
        publishOrigin: default␊
      functionsDirectory: packages/build/tests/constants/fixtures/functions_src_relative/functions␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    functions␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Functions were found in functions directory␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC dynamic is ignored if FUNCTIONS_SRC is specified

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: /tmp-dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      /tmp-dir␊
    ␊
    > Config file␊
      /tmp-dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: /tmp-dir␊
        publishOrigin: default␊
      functionsDirectory: /tmp-dir/test␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. ./plugin (onBuild event)                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onBuild completed in 1ms)␊
    Build step duration: ./plugin onBuild completed in 1ms␊
    ␊
      3. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Functions were found in test directory␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC dynamic should bundle Functions

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: /tmp-dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      /tmp-dir␊
    ␊
    > Config file␊
      /tmp-dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: /tmp-dir␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    No Functions were found in netlify/functions directory␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC automatic value

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_auto␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_auto␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_auto/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_auto␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    undefined␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC missing path

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_src_missing␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_src_missing␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_src_missing/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_src_missing␊
        publishOrigin: default␊
      functionsDirectory: packages/build/tests/constants/fixtures/functions_src_missing/missing␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    missing false␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. Functions bundling                                         ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    The Netlify Functions setting targets a non-existing directory: missing␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_SRC created dynamically

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: /tmp-dir␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      /tmp-dir␊
    ␊
    > Config file␊
      /tmp-dir/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: /tmp-dir␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      2. ./plugin (onBuild event)                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    netlify/functions␊
    ␊
    (./plugin onBuild completed in 1ms)␊
    Build step duration: ./plugin onBuild completed in 1ms␊
    ␊
      3. ./plugin (onPostBuild event)                               ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPostBuild completed in 1ms)␊
    Build step duration: ./plugin onPostBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.INTERNAL_FUNCTIONS_SRC default value

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/internal_functions_src_default␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/internal_functions_src_default␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/internal_functions_src_default/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/internal_functions_src_default␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    .netlify/functions-internal␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.FUNCTIONS_DIST

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/functions_dist␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/functions_dist␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/functions_dist/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/functions_dist␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    .netlify/functions/␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.CACHE_DIR local

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/cache␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/cache␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/cache/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/cache␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    .netlify/cache␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.CACHE_DIR CI

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      cacheDir: /external/path␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/cache␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/cache␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/cache/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/cache␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    /external/path␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.IS_LOCAL CI

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      mode: buildbot␊
      repositoryRoot: packages/build/tests/constants/fixtures/is_local␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/is_local␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/is_local/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/is_local␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    false␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.SITE_ID

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/site_id␊
      siteId: test␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/site_id␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/site_id/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/site_id␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    test␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.IS_LOCAL local

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/is_local␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/is_local␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/is_local/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/is_local␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    true␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.NETLIFY_BUILD_VERSION

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/netlify_build_version␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/netlify_build_version␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/netlify_build_version/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/netlify_build_version␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    1.0.0␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.NETLIFY_API_TOKEN

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/netlify_api_token␊
      testOpts:␊
        env: false␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/netlify_api_token␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/netlify_api_token/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/netlify_api_token␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    test␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.NETLIFY_API_HOST

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      apiHost: test.api.netlify.com␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/netlify_api_host␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/netlify_api_host␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/netlify_api_host/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/netlify_api_host␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    test.api.netlify.com␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.NETLIFY_API_HOST default value is set to api.netlify.com

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/netlify_api_host␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/netlify_api_host␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/netlify_api_host/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/netlify_api_host␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    api.netlify.com␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## constants.INTERNAL_EDGE_FUNCTIONS_SRC default value

> Snapshot 1

    `␊
      Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/constants/fixtures/internal_edge_functions_src␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/constants/fixtures/internal_edge_functions_src␊
    ␊
    > Config file␊
      packages/build/tests/constants/fixtures/internal_edge_functions_src/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/constants/fixtures/internal_edge_functions_src␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin@1.0.0 from netlify.toml␊
    ␊
      1. ./plugin (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    .netlify/edge-functions␊
    ␊
    (./plugin onPreBuild completed in 1ms)␊
    Build step duration: ./plugin onPreBuild completed in 1ms␊
    ␊
      Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`
