# Snapshot report for `tests/deploy_config/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://avajs.dev).

## Merges configuration after the `onPreBuild` and before the `onBuild` plugin events

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/deploy_config/fixtures/deploy_config␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/deploy_config/fixtures/deploy_config␊
    ␊
    > Config file␊
      packages/build/tests/deploy_config/fixtures/deploy_config/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        command: echo Hello␊
        commandOrigin: config␊
        publish: packages/build/tests/deploy_config/fixtures/deploy_config␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
      redirects:␊
        - from: /external/path␊
          status: 200␊
          to: /external/path␊
      redirectsOrigin: config␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    ./plugin.js (onPreBuild event)                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    onPreBuild: {␊
      redirectsOrigin: 'config',␊
      functions: { '*': {} },␊
      plugins: [ { package: './plugin.js', origin: 'config', inputs: {} } ],␊
      build: {␊
        environment: {},␊
        publish: 'packages/build/tests/deploy_config/fixtures/deploy_config',␊
        publishOrigin: 'default',␊
        processing: { css: {}, html: {}, images: {}, js: {} },␊
        services: {},␊
        command: 'echo Hello',␊
        commandOrigin: 'config'␊
      },␊
      headers: [],␊
      redirects: [␊
        {␊
          from: '/external/path',␊
          query: {},␊
          to: '/external/path',␊
          status: 200,␊
          force: false,␊
          conditions: {},␊
          headers: {}␊
        }␊
      ]␊
    }␊
    ␊
    (./plugin.js onPreBuild completed in 1ms)␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    build.command from netlify.toml                               ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    $ echo Hello␊
    Hello␊
    ␊
    (build.command completed in 1ms)␊
    Build step duration: build.command completed in 1ms␊
    ␊
    ./plugin.js (onBuild event)                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    onBuild: {␊
      redirectsOrigin: 'config',␊
      functions: { '*': {}, 'my_framework*': { included_files: [Array] } },␊
      plugins: [ { package: './plugin.js', origin: 'config', inputs: {} } ],␊
      build: {␊
        environment: {},␊
        publish: 'packages/build/tests/deploy_config/fixtures/deploy_config',␊
        publishOrigin: 'default',␊
        processing: { css: {}, html: {}, images: {}, js: {} },␊
        services: {},␊
        command: 'echo Hello',␊
        commandOrigin: 'config'␊
      },␊
      headers: [],␊
      redirects: [␊
        {␊
          from: '/external/path',␊
          query: {},␊
          to: '/external/path',␊
          status: 200,␊
          force: false,␊
          conditions: {},␊
          headers: {}␊
        },␊
        {␊
          from: '/external/path',␊
          to: '/external/path',␊
          status: 418,␊
          force: true␊
        }␊
      ]␊
    }␊
    ␊
    (./plugin.js onBuild completed in 1ms)␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`
