# Snapshot report for `packages/build/tests/error/build/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## build.cancel() backward compatibility

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## build.fail() backward compatibility

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.cancelBuild()

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.cancelBuild() API call

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

> Snapshot 2

    {
      body: '',
      headers: [
        'accept',
        'accept-encoding',
        'authorization',
        'connection',
        'content-length',
        'host',
        'user-agent',
      ],
      method: 'POST',
      sent: true,
    }

## error.cancelBuild() API call failure

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │          API error          │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      request to https://.../api/v1.0.0/deploys/test/cancel failed, reason: getaddrinfo ENOTFOUND ...␊
    ␊
    > Error location␊
      While calling the Netlify API endpoint 'cancelSiteDeploy' with: { "deploy_id": "test" }␊
    ␊
    > Error properties␊
      { type: 'system', errno: 'ENOTFOUND', code: 'ENOTFOUND', name: 'FetchError', url: 'https://.../api/v1.0.0/deploys/test/cancel', data: { method: 'POST', headers: { 'User-agent': 'netlify/js-client', accept: 'application/json', Authorization: 'Bearer test' } } }␊
    `

## error.cancelBuild() API call no DEPLOY_ID

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.cancelBuild() API call no token

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.cancelBuild() error option

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │       Build canceled        │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
      innerTest␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.failBuild()

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.failBuild() error option

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
      innerTest␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## error.failPlugin()

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-two from /file/path␊
       - netlify-plugin-one from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 7 commands. Lets do this!␊
    ␊
    ┌───────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-two │␊
    └───────────────────────────────────────────────────┘␊
    ␊
    onInit␊
    ␊
     √  netlify-plugin-two.onInit completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────┐␊
    │ 2. Running onInit command from netlify-plugin-one │␊
    └───────────────────────────────────────────────────┘␊
    ␊
    ┌─────────────────────────────┐␊
    │  Plugin "/file/path" failed   │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onPreBuild command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onPreBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 4. Running onBuild command from netlify-plugin-two │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    onBuild␊
    ␊
     √  netlify-plugin-two.onBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────────┐␊
    │ 5. Running onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onPostBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 6. Running onPostBuild command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onPostBuild completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## error.failPlugin() error option

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-two from /file/path␊
       - netlify-plugin-one from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 7 commands. Lets do this!␊
    ␊
    ┌───────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-two │␊
    └───────────────────────────────────────────────────┘␊
    ␊
    onInit␊
    ␊
     √  netlify-plugin-two.onInit completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────┐␊
    │ 2. Running onInit command from netlify-plugin-one │␊
    └───────────────────────────────────────────────────┘␊
    ␊
    ┌─────────────────────────────┐␊
    │  Plugin "/file/path" failed   │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
      innerTest␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onPreBuild command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onPreBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 4. Running onBuild command from netlify-plugin-two │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    onBuild␊
    ␊
     √  netlify-plugin-two.onBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────────┐␊
    │ 5. Running onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onPostBuild completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 6. Running onPostBuild command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onPostBuild completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## exception

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌──────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └──────────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## exception with static properties

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌──────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └──────────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    > Error properties␊
      { test: true }␊
    `
