# Snapshot report for `packages/build/tests/error/plugin_load/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## Early exit

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 6 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────┐␊
    │ 2. Running onPreBuild command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────────┘␊
    ␊
    onPreBuild␊
    ␊
     √  netlify-plugin-test.onPreBuild completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────┐␊
    │ 3. Running onBuild command from netlify-plugin-test │␊
    └─────────────────────────────────────────────────────┘␊
    ␊
    onBuild start␊
    onBuild end␊
    ␊
     √  netlify-plugin-test.onBuild completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────┐␊
    │ 4. Running onPostBuild command from netlify-plugin-test │␊
    └─────────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Could not receive event from child process because it already exited␊
    ␊
    > Error location␊
      In "onPostBuild" event in local plugin "/file/path"␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `

## Exits in plugins

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Plugin exited with exit code 1 and signal null.␊
      Instead of calling process.exit(), plugin methods should either return (on success) or throw errors (on failure).␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `

## Node module all fields

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test@1.0.0␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Plugin details␊
      ID:             netlify-plugin-test␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/test/test.git␊
      npm link:       https://www.npmjs.com/package/netlify-plugin-test␊
      Report issues:  https://test.com/test␊
    ␊
    > Error location␊
      In "onInit" event in npm package "netlify-plugin-test"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │      END Build failed       │␊
    └─────────────────────────────┘␊
    `

## Node module partial fields

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test@␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: test␊
    ␊
    > Plugin details␊
      ID:             netlify-plugin-test␊
    ␊
    > Error location␊
      In "onInit" event in npm package "netlify-plugin-test"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │      END Build failed       │␊
    └─────────────────────────────┘␊
    `

## Process warnings

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    onInit␊
    ␊
     √  netlify-plugin-test.onInit completed in 1ms␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 2. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onFunctionsPackage command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onFunctionsPackage completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 4. Running onSaveCache command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onSaveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    ␊
    ␊
     ‼  warning (Warning)  test␊
    STACK TRACE␊
    STACK TRACE`

## Top function errors local

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: Could not load plugin: test␊
    ␊
    > Error location␊
      While loading local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `

## Top-level errors

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: Could not import plugin: test␊
    ␊
    > Error location␊
      While loading local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `

## Uncaught exception

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      UncaughtException: an exception was thrown but not caught: Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `

## Unhandled promises

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
       - netlify-plugin-test from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running onInit command from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    onInit␊
    ␊
    ┌─────────────────────────────┐␊
    │    Plugin internal error    │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      UnhandledRejection: a promise was rejected but not handled: Error: test␊
    ␊
    > Error location␊
      In "onInit" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ┌─────────────────────────────┐␊
    │  END Plugin internal error  │␊
    └─────────────────────────────┘␊
    `
