# Snapshot report for `tests/status/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://avajs.dev).

## utils.status.show() can override a success status

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/success_status_override␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/success_status_override␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/success_status_override/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/success_status_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    Build step duration: ./plugin.js onSuccess completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      onSuccess␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onSuccess',
          state: 'success',
          summary: 'onSuccess',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() cannot override an error status with a success status

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_status_override␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_status_override␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_status_override/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_status_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onError completed in 1ms␊
    Build step duration: ./plugin.js onEnd completed in 1ms␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: onBuild␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_status_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: onBuild',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() plugin error cannot override a build error

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_status_error_override␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_status_error_override␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_status_error_override/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_status_error_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: onError␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onError" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_status_error_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: onBuild␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_status_error_override␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: onBuild',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is not used when an explicit call was made

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/no_implicit␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/no_implicit␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/no_implicit/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/no_implicit␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    Build step duration: ./plugin.js onSuccess completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      summary␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is not used when there are no events

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/no_implicit_none␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/no_implicit_none␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/no_implicit_none/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/no_implicit_none␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          state: 'skipped',
          text: undefined,
          version: undefined,
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is not used when plugin did not complete

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/no_implicit_incomplete␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/no_implicit_incomplete␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/no_implicit_incomplete/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/no_implicit_incomplete␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./two.js" internal error                              ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: onPreBuild␊
    ␊
      Plugin details␊
      Package:        ./two.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./two.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/no_implicit_incomplete␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js`

> Snapshot 2

    [
      {
        body: {
          package: './one.js',
          state: 'skipped',
          text: undefined,
          version: undefined,
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './two.js',
          reporting_event: 'onPreBuild',
          state: 'failed_build',
          summary: 'Error: onPreBuild',
          text: 'In "onPreBuild" event in "./two.js" from netlify.toml',
          title: 'Plugin "./two.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is not used when no call was made, with only onError

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/no_implicit_onerror␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/no_implicit_onerror␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/no_implicit_onerror/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/no_implicit_onerror␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          state: 'skipped',
          text: undefined,
          version: undefined,
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is used when no call was made

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/implicit_one␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/implicit_one␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/implicit_one/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/implicit_one␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is used when no events have made a call

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/implicit_several␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/implicit_several␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/implicit_several/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/implicit_several␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    Build step duration: ./plugin.js onSuccess completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onSuccess',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() implicit status is used when no call was made, with only onEnd

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/implicit_onend␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/implicit_onend␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/implicit_onend/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/implicit_onend␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    Build step duration: ./plugin.js onEnd completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onEnd',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() are printed locally

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/print␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/print␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/print/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/print␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
        - inputs: {}␊
          origin: config␊
          package: ./three.js␊
        - inputs: {}␊
          origin: config␊
          package: ./four.js␊
        - inputs: {}␊
          origin: config␊
          package: ./five.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
       - ./three.js@1.0.0 from netlify.toml␊
       - ./four.js@1.0.0 from netlify.toml␊
       - ./five.js@1.0.0 from netlify.toml␊
    Build step duration: ./one.js onPreBuild completed in 1ms␊
    Build step duration: ./two.js onPreBuild completed in 1ms␊
    Build step duration: ./three.js onPreBuild completed in 1ms␊
    Build step duration: ./four.js onPreBuild completed in 1ms␊
    Build step duration: ./five.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./one.js ran successfully␊
      summary␊
    ␊
    > title ./two.js␊
      summary␊
    ␊
    > Plugin ./three.js ran successfully␊
      summary␊
      text␊
    ␊
    > ./four.js: title␊
      summary␊
      text␊
    ␊
    > ./five.js: title␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() are not printed in production

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      mode: buildbot␊
      repositoryRoot: packages/build/tests/status/fixtures/print␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/print␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/print/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/print␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
        - inputs: {}␊
          origin: config␊
          package: ./three.js␊
        - inputs: {}␊
          origin: config␊
          package: ./four.js␊
        - inputs: {}␊
          origin: config␊
          package: ./five.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
       - ./three.js@1.0.0 from netlify.toml␊
       - ./four.js@1.0.0 from netlify.toml␊
       - ./five.js@1.0.0 from netlify.toml␊
    Build step duration: ./one.js onPreBuild completed in 1ms␊
    Build step duration: ./two.js onPreBuild completed in 1ms␊
    Build step duration: ./three.js onPreBuild completed in 1ms␊
    Build step duration: ./four.js onPreBuild completed in 1ms␊
    Build step duration: ./five.js onPreBuild completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() statuses are sent to the API

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/print␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/print␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/print/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/print␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
        - inputs: {}␊
          origin: config␊
          package: ./three.js␊
        - inputs: {}␊
          origin: config␊
          package: ./four.js␊
        - inputs: {}␊
          origin: config␊
          package: ./five.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
       - ./three.js@1.0.0 from netlify.toml␊
       - ./four.js@1.0.0 from netlify.toml␊
       - ./five.js@1.0.0 from netlify.toml␊
    Build step duration: ./one.js onPreBuild completed in 1ms␊
    Build step duration: ./two.js onPreBuild completed in 1ms␊
    Build step duration: ./three.js onPreBuild completed in 1ms␊
    Build step duration: ./four.js onPreBuild completed in 1ms␊
    Build step duration: ./five.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./one.js ran successfully␊
      summary␊
    ␊
    > title ./two.js␊
      summary␊
    ␊
    > Plugin ./three.js ran successfully␊
      summary␊
      text␊
    ␊
    > ./four.js: title␊
      summary␊
      text␊
    ␊
    > ./five.js: title␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          extra_data: [
            'extra',
          ],
          package: './five.js',
          reporting_event: 'onPreBuild',
          state: 'success',
          summary: 'summary',
          text: 'text',
          title: 'title',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './four.js',
          reporting_event: 'onPreBuild',
          state: 'success',
          summary: 'summary',
          text: 'text',
          title: 'title',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './one.js',
          reporting_event: 'onPreBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './three.js',
          reporting_event: 'onPreBuild',
          state: 'success',
          summary: 'summary',
          text: 'text',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './two.js',
          reporting_event: 'onPreBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          title: 'title ./two.js',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() statuses are not sent to the API without a token

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/print␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/print␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/print/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/print␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
        - inputs: {}␊
          origin: config␊
          package: ./three.js␊
        - inputs: {}␊
          origin: config␊
          package: ./four.js␊
        - inputs: {}␊
          origin: config␊
          package: ./five.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
       - ./three.js@1.0.0 from netlify.toml␊
       - ./four.js@1.0.0 from netlify.toml␊
       - ./five.js@1.0.0 from netlify.toml␊
    Build step duration: ./one.js onPreBuild completed in 1ms␊
    Build step duration: ./two.js onPreBuild completed in 1ms␊
    Build step duration: ./three.js onPreBuild completed in 1ms␊
    Build step duration: ./four.js onPreBuild completed in 1ms␊
    Build step duration: ./five.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./one.js ran successfully␊
      summary␊
    ␊
    > title ./two.js␊
      summary␊
    ␊
    > Plugin ./three.js ran successfully␊
      summary␊
      text␊
    ␊
    > ./four.js: title␊
      summary␊
      text␊
    ␊
    > ./five.js: title␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    []

## utils.status.show() statuses are not sent to the API without a DEPLOY_ID

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/print␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/print␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/print/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/print␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one.js␊
        - inputs: {}␊
          origin: config␊
          package: ./two.js␊
        - inputs: {}␊
          origin: config␊
          package: ./three.js␊
        - inputs: {}␊
          origin: config␊
          package: ./four.js␊
        - inputs: {}␊
          origin: config␊
          package: ./five.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one.js@1.0.0 from netlify.toml␊
       - ./two.js@1.0.0 from netlify.toml␊
       - ./three.js@1.0.0 from netlify.toml␊
       - ./four.js@1.0.0 from netlify.toml␊
       - ./five.js@1.0.0 from netlify.toml␊
    Build step duration: ./one.js onPreBuild completed in 1ms␊
    Build step duration: ./two.js onPreBuild completed in 1ms␊
    Build step duration: ./three.js onPreBuild completed in 1ms␊
    Build step duration: ./four.js onPreBuild completed in 1ms␊
    Build step duration: ./five.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./one.js ran successfully␊
      summary␊
    ␊
    > title ./two.js␊
      summary␊
    ␊
    > Plugin ./three.js ran successfully␊
      summary␊
      text␊
    ␊
    > ./four.js: title␊
      summary␊
      text␊
    ␊
    > ./five.js: title␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    []

## utils.status.show() statuses are sent to the API for core commands

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/core_command_error␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/core_command_error␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/core_command_error/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/core_command_error␊
        publishOrigin: default␊
      functionsDirectory: packages/build/tests/status/fixtures/core_command_error/functions␊
    ␊
    > Context␊
      production␊
    ␊
    Functions bundling                                            ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    Packaging Functions from functions directory:␊
     - function.js␊
    ␊
    ␊
    (Functions bundling completed in 1ms)␊
    Build step duration: Functions bundling completed in 1ms␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    []

## utils.status.show() statuses API errors are handled

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/simple␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/simple␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/simple/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/simple␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      summary␊
    ␊
    API error on "createPluginRun"                                ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Bad Request␊
    ␊
      Error location␊
      While calling the Netlify API endpoint 'createPluginRun' with:␊
      {␊
        "deploy_id": "test",␊
        "body": {␊
          "package": "./plugin.js",␊
          "version": "1.0.0",␊
          "state": "success",␊
          "reporting_event": "onBuild",␊
          "summary": "summary"␊
        }␊
      }␊
    ␊
      Error properties␊
      { name: 'JSONHTTPError', status: 400, json: {} }␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/simple␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() statuses are sent to the API without colors

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/colors␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/colors␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/colors/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/colors␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      summary␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from failBuild()

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_fail_build␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_fail_build␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_fail_build/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_fail_build␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" failed                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: error␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_fail_build␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: error',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" failed',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from failPlugin()

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_fail_plugin␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_fail_plugin␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_fail_plugin/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_fail_plugin␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" failed                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: error␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_fail_plugin␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_plugin',
          summary: 'Error: error',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" failed',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from cancelBuild()

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_cancel_build␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_cancel_build␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_cancel_build/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_cancel_build␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Build canceled by ./plugin.js                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      error␊
    `

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'canceled_build',
          summary: 'error',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Build canceled by ./plugin.js',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## does not report error statuses from build.command errors

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_build_command␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_build_command␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_build_command/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        command: node --invalid␊
        commandOrigin: config␊
        publish: packages/build/tests/status/fixtures/error_build_command␊
        publishOrigin: default␊
    ␊
    > Context␊
      production␊
    ␊
    build.command from netlify.toml                               ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    $ node --invalid␊
    ␊
    "build.command" failed                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
      Error location␊
      In build.command from netlify.toml:␊
      node --invalid␊
    ␊
      Resolved config␊
      build:␊
        command: node --invalid␊
        commandOrigin: config␊
        publish: packages/build/tests/status/fixtures/error_build_command␊
        publishOrigin: default␊
    ␊
    node: bad option: --invalid`

> Snapshot 2

    []

## report error statuses from uncaught exceptions with static properties

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_properties␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_properties␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_properties/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_properties␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: test␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Error properties␊
      { test: true }␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_properties␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: test',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml Error properties: { test: true }',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from uncaught exceptions during plugin load

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_load_uncaught␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_load_uncaught␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_load_uncaught/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_load_uncaught␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Could not import plugin:␊
      Error: test␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      While loading "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_load_uncaught␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'load',
          state: 'failed_build',
          summary: `Could not import plugin:␊
          Error: test`,
          text: 'While loading "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from uncaught exceptions during onSuccess

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_onsuccess␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_onsuccess␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_onsuccess/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_onsuccess␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: test␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onSuccess" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_onsuccess␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onSuccess',
          state: 'failed_plugin',
          summary: 'Error: test',
          text: 'In "onSuccess" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from uncaught exceptions during onEnd

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_onend␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_onend␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_onend/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_onend␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: test␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onEnd" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_onend␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onEnd',
          state: 'failed_plugin',
          summary: 'Error: test',
          text: 'In "onEnd" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from plugin invalid shape

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_plugin_shape␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_plugin_shape␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_plugin_shape/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_plugin_shape␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: Plugin must be an object or a function␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      While loading "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_plugin_shape␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'load',
          state: 'failed_build',
          summary: 'Error: Plugin must be an object or a function',
          text: 'While loading "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from plugin inputs validation

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_inputs_validation␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_inputs_validation␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_inputs_validation/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_inputs_validation␊
        publishOrigin: default␊
      plugins:␊
        - inputs:␊
            test: true␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    Plugin "./plugin.js" invalid input "test"                     ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Plugin "./plugin.js" does not accept any inputs but you specified: "test"␊
      Check your plugin configuration to be sure that:␊
        - the input name is spelled correctly␊
        - the input is included in the plugin's available configuration options␊
        - the plugin's input requirements have not changed␊
    ␊
      Plugin inputs␊
      test: true␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      While loading "./plugin.js" from netlify.toml␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_inputs_validation␊
        publishOrigin: default␊
      plugins:␊
        - inputs:␊
            test: true␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'load',
          state: 'failed_build',
          summary: `Plugin "./plugin.js" does not accept any inputs but you specified: "test"␊
          Check your plugin configuration to be sure that:␊
            - the input name is spelled correctly␊
            - the input is included in the plugin's available configuration options␊
            - the plugin's input requirements have not changed␊
          ␊
          Plugin inputs␊
          test: true`,
          text: 'While loading "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" invalid input "test"',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses from plugin loads with other plugins loading

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_plugin_load␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_plugin_load␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_plugin_load/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_plugin_load␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one␊
        - inputs: {}␊
          origin: config␊
          package: ./two␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./one@1.0.0 from netlify.toml␊
       - ./two@1.0.0 from netlify.toml␊
    ␊
    Plugin "./one" internal error                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Could not import plugin:␊
      Error: test␊
    ␊
      Plugin details␊
      Package:        ./one␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      While loading "./one" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_plugin_load␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./one␊
        - inputs: {}␊
          origin: config␊
          package: ./two`

> Snapshot 2

    [
      {
        body: {
          package: './one',
          reporting_event: 'load',
          state: 'failed_build',
          summary: `Could not import plugin:␊
          Error: test`,
          text: 'While loading "./one" from netlify.toml',
          title: 'Plugin "./one" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
      {
        body: {
          package: './two',
          state: 'skipped',
          text: undefined,
          version: undefined,
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## report error statuses extraData from failBuild()

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      deployId: test␊
      repositoryRoot: packages/build/tests/status/fixtures/error_extra_info␊
      sendStatus: true␊
      testOpts:␊
        host: /test/socket␊
        pluginsListUrl: test␊
        scheme: http␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/error_extra_info␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/error_extra_info/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_extra_info␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" failed                                   ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: error␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/error_extra_info␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

> Snapshot 2

    [
      {
        body: {
          extra_data: {
            foo: 'bar',
          },
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: error',
          text: 'In "onBuild" event in "./plugin.js" from netlify.toml',
          title: 'Plugin "./plugin.js" failed',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
        url: '/api/v1/deploys/test/plugin_runs',
      },
    ]

## utils.status.show() does not fail

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > ./plugin.js: title␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() argument should be defined

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() requires an argument␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() argument should be an object

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() argument must be a plain object␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() argument should not contain typos

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() must only contain "title", "summary" or "text" properties, not "titles"␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() requires a summary

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() requires specifying a "summary" property␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() allow other fields to be optional

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      summary␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() title should be a string

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() "title" property must be a string␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() title can be empty

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Plugin ./plugin.js ran successfully␊
      summary␊
      text␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() summary should be a string

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() "summary" property must be a string␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() summary should not be empty

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() requires specifying a "summary" property␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() text should be a string

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      Error: utils.status.show() "text" property must be a string␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`

## utils.status.show() text can be empty

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > ./plugin.js: title␊
      summary␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() extraData can be empty

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    Build step duration: ./plugin.js onPreBuild completed in 1ms␊
    ␊
    Summary                                                       ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > ./plugin.js: title␊
      summary␊
    ␊
    Netlify Build Complete                                        ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    (Netlify Build completed in 1ms)␊
    Build step duration: Netlify Build completed in 1ms`

## utils.status.show() extraData should be an array

> Snapshot 1

    `␊
    Netlify Build                                                 ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      debug: true␊
      repositoryRoot: packages/build/tests/status/fixtures/show_util␊
      testOpts:␊
        pluginsListUrl: test␊
        silentLingeringProcesses: true␊
    ␊
    > Current directory␊
      packages/build/tests/status/fixtures/show_util␊
    ␊
    > Config file␊
      packages/build/tests/status/fixtures/show_util/netlify.toml␊
    ␊
    > Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - ./plugin.js@1.0.0 from netlify.toml␊
    ␊
    Plugin "./plugin.js" internal error                           ␊
    ────────────────────────────────────────────────────────────────␊
    ␊
      Error message␊
      TypeError: utils.status.show() provided extra data must be an array␊
    ␊
      Plugin details␊
      Package:        ./plugin.js␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in "./plugin.js" from netlify.toml␊
    STACK TRACE␊
    ␊
      Resolved config␊
      build:␊
        publish: packages/build/tests/status/fixtures/show_util␊
        publishOrigin: default␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: ./plugin.js`
