# Snapshot report for `packages/build/tests/status/add/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## utils.status.show() can override a success status

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onBuild completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────┐␊
    │ 2. onSuccess command from /file/path │␊
    └───────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onSuccess completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │           Summary           │␊
    └─────────────────────────────┘␊
    ␊
    > Plugin /file/path ran successfully␊
      onSuccess␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onSuccess',
          state: 'success',
          summary: 'onSuccess',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() can override an error status with another error status

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 2. onError command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └─────────────────────────────────────┘␊
    ␊
      Error message␊
      Error: onError␊
    ␊
      Plugin details␊
      Name:           /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onError" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onError',
          state: 'failed_build',
          summary: 'Error: onError',
          text: 'In "onError" event in local plugin "./plugin.js"',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() cannot override an error status with a success status

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 2. onError command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onError completed in 1ms)␊
    ␊
    ┌───────────────────────────────────┐␊
    │ 3. onEnd command from /file/path │␊
    └───────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └─────────────────────────────────────┘␊
    ␊
      Error message␊
      Error: onBuild␊
    ␊
      Plugin details␊
      Name:           /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onBuild" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'failed_build',
          summary: 'Error: onBuild',
          text: 'In "onBuild" event in local plugin "./plugin.js"',
          title: 'Plugin "./plugin.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() implicit status is not used when an explicit call was made

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onBuild completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────┐␊
    │ 2. onSuccess command from /file/path │␊
    └───────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onSuccess completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │           Summary           │␊
    └─────────────────────────────┘␊
    ␊
    > Plugin /file/path ran successfully␊
      summary␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          summary: 'summary',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() implicit status is not used when no call was made, with only onError

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    []

## utils.status.show() implicit status is not used when plugin did not complete

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onPreBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    ┌──────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └──────────────────────────────────┘␊
    ␊
      Error message␊
      Error: onPreBuild␊
    ␊
      Plugin details␊
      Name:           /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
      Error location␊
      In "onPreBuild" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

> Snapshot 2

    [
      {
        body: {
          package: './two.js',
          reporting_event: 'onPreBuild',
          state: 'failed_build',
          summary: 'Error: onPreBuild',
          text: 'In "onPreBuild" event in local plugin "./two.js"',
          title: 'Plugin "./two.js" internal error',
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() implicit status is not used when there are no events

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    []

## utils.status.show() implicit status is used when no call was made

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onBuild',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() implicit status is used when no call was made, with only onEnd

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌───────────────────────────────────┐␊
    │ 1. onEnd command from /file/path │␊
    └───────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onEnd',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]

## utils.status.show() implicit status is used when no events have made a call

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - origin: config␊
          package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onBuild completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────┐␊
    │ 2. onSuccess command from /file/path │␊
    └───────────────────────────────────────┘␊
    ␊
    ␊
    (/file/path onSuccess completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

> Snapshot 2

    [
      {
        body: {
          package: './plugin.js',
          reporting_event: 'onSuccess',
          state: 'success',
          text: undefined,
          version: '1.0.0',
        },
        headers: 'accept accept-encoding authorization connection content-length content-type host user-agent',
        method: 'POST',
      },
    ]
