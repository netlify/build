# Snapshot report for `packages/build/tests/config/validate/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## build.base: parent directory

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.base must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        base: /file/path␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        base: base_dir`

## build.base: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.base must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        base: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        base: packages/project`

## build.command: array of strings

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.command must be a string or an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        command:␊
          - true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish␊
        command:␊
          - npm run build␊
          - npm test`

## build.command: not with lifecycle

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.command must not be defined when build.lifecycle is also defined.␊
    Please rename build.command to build.lifecycle.onBuild.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        command: test␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        command: test␊
        lifecycle:␊
          onBuild: npm run build`

## build.command: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.command must be a string or an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        command: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish␊
        command:␊
          - npm run build␊
          - npm test`

## build.command: with environment variable lifecycle

> Snapshot 1

    `{␊
      "configPath": "/file/path",␊
      "buildDir": "/file/path",␊
      "config": {␊
        "plugins": [],␊
        "build": {␊
          "environment": {},␊
          "lifecycle": {␊
            "onBuild": [␊
              "echo test"␊
            ]␊
          }␊
        }␊
      },␊
      "context": "production",␊
      "branch": "branch"␊
    }`

## build.context.CONTEXT: object

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property context.production must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      context:␊
        production: false␊
    ␊
    Valid syntax␊
    ␊
      context:␊
        production:␊
          publish: dist`

## build.context: nested property

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property context.development.lifecycle.onBuild must be a string or an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      context:␊
        development:␊
          lifecycle:␊
            onBuild: true␊
    ␊
    Valid syntax␊
    ␊
      context:␊
        development:␊
          lifecycle:␊
            onBuild:␊
              - npm run build␊
              - npm test`

## build.context: object

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property context must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      context: false␊
    ␊
    Valid syntax␊
    ␊
      context:␊
        production:␊
          publish: dist`

## build.context: property

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property context.development.base must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      context:␊
        development:␊
          base: true␊
    ␊
    Valid syntax␊
    ␊
      context:␊
        development:␊
          base: packages/project`

## build.functions: parent directory

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.functions must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        functions: /file/path␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        functions: functions_dir`

## build.functions: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.functions must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        functions: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish␊
        functions: functions`

## build.lifecycle: array

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.lifecycle.onBuild must be a string or an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onBuild:␊
            - true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onInit: onInit␊
          onBuild:␊
            - npm run build␊
            - npm test`

## build.lifecycle: event names

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.lifecycle has unknown properties. Valid properties are:␊
      - onInit␊
      - onPreGetCache␊
      - onGetCache␊
      - onPostGetCache␊
      - onPreInstall␊
      - onInstall␊
      - onPostInstall␊
      - onPreBuild␊
      - onBuild␊
      - onPostBuild␊
      - onPreFunctionsBuild␊
      - onFunctionsBuild␊
      - onPostFunctionsBuild␊
      - onPreFunctionsPackage␊
      - onFunctionsPackage␊
      - onPostFunctionsPackage␊
      - onPreDeploy␊
      - onPreSaveCache␊
      - onSaveCache␊
      - onPostSaveCache␊
      - onSuccess␊
      - onError␊
      - onEnd␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onBuild: onBuild␊
          unknown: test␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish␊
        lifecycle:␊
          onBuild: npm run build`

## build.lifecycle: object

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.lifecycle must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        lifecycle: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish␊
        lifecycle:␊
          onBuild: npm run build`

## build.lifecycle: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.lifecycle.onBuild must be a string or an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onBuild: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onInit: onInit␊
          onBuild:␊
            - npm run build␊
            - npm test`

## build.publish: parent directory

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.publish must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        publish: /file/path␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: publish_dir`

## build.publish: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build.publish must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      build:␊
        publish: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        publish: dist␊
        lifecycle: {}`

## build: object

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property build must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      build: true␊
    ␊
    Valid syntax␊
    ␊
      build:␊
        lifecycle:␊
          onBuild: npm run build␊
      plugins: []`

## plugins.any.config: object

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0].config must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - config: true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - package: netlify-plugin-one␊
          config:␊
            port: 80`

## plugins.any.enabled: boolean

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0].enabled must be a boolean.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - enabled: 0␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - package: netlify-plugin-one␊
          enabled: false`

## plugins.any.id: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0].id must be an string.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - id: true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - id: one␊
          package: test`

## plugins.any.package: required

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0] "package" property is required.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - enabled: true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - enabled: true␊
          package: netlify-plugin-one`

## plugins.any.package: string

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0].package must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - package: true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - package: netlify-plugin-one␊
          enabled: true`

## plugins.any.type renamed

> Snapshot 1

    `{␊
      "configPath": "/file/path",␊
      "buildDir": "/file/path",␊
      "config": {␊
        "plugins": [␊
          {␊
            "enabled": false,␊
            "package": "/file/path"␊
          }␊
        ],␊
        "build": {␊
          "environment": {},␊
          "lifecycle": {}␊
        }␊
      },␊
      "context": "production",␊
      "branch": "branch"␊
    }␊
    ␊
    Configuration property plugins[0].type has been renamed to "package".␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - type: /file/path␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - enabled: false␊
          package: /file/path␊
    `

## plugins.any: unknown property

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins[0] has unknown properties. Valid properties are:␊
      - id␊
      - package␊
      - enabled␊
      - config␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - test: true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - id: one␊
          package: netlify-plugin-one␊
          enabled: false␊
          config:␊
            port: 80`

## plugins: not array

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins must be an array of objects.␊
    ␊
    Invalid syntax␊
    ␊
      plugins: {}␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - package: netlify-plugin-one␊
        - package: netlify-plugin-two␊
      build: {}`

## plugins: not array of objects

> Snapshot 1

    `When resolving config file /file/path␊
    Configuration property plugins must be an array of objects.␊
    ␊
    Invalid syntax␊
    ␊
      plugins:␊
        - true␊
    ␊
    Valid syntax␊
    ␊
      plugins:␊
        - package: netlify-plugin-one␊
        - package: netlify-plugin-two␊
      build: {}`
