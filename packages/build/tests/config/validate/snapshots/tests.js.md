# Snapshot report for `packages/build/tests/config/validate/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## build.command: array of strings

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.command must be a string or an array of strings.␊
    ␊
      Invalid syntax␊
    ␊
        build: command:␊
            - true␊
    ␊
      Valid syntax␊
    ␊
        build: publish: publish␊
          command:␊
            - npm run build␊
            - npm test␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.command: not with lifecycle

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.command must not be defined when build.lifecycle is also defined.␊
      Please rename build.command to build.lifecycle.onBuild.␊
    ␊
      Invalid syntax␊
    ␊
        build: command: test␊
    ␊
      Valid syntax␊
    ␊
        build: command: test␊
          lifecycle: onBuild: npm run build␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.command: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.command must be a string or an array of strings.␊
    ␊
      Invalid syntax␊
    ␊
        build: command: true␊
    ␊
      Valid syntax␊
    ␊
        build: publish: publish␊
          command:␊
            - npm run build␊
            - npm test␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.command: with environment variable lifecycle

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-core from build core␊
       - @netlify/plugin-cache-core from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo test"␊
    test␊
    ␊
     √  build.lifecycle.onBuild completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onFunctionsPackage command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onFunctionsPackage completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 4. Running onSaveCache command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onSaveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## build.functions: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.functions must be a string.␊
    ␊
      Invalid syntax␊
    ␊
        build: functions: true␊
    ␊
      Valid syntax␊
    ␊
        build: publish: publish␊
          functions: functions␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.lifecycle: array

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.lifecycle.onBuild must be a string or an array of strings.␊
    ␊
      Invalid syntax␊
    ␊
        build: lifecycle: onBuild:␊
              - true␊
    ␊
      Valid syntax␊
    ␊
        build: lifecycle: onInit: onInit␊
            onBuild:␊
              - npm run build␊
              - npm test␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.lifecycle: event names

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.lifecycle has unknown properties. Valid properties are:␊
        - onInit␊
        - onPreGetCache␊
        - onGetCache␊
        - onPostGetCache␊
        - onPreInstall␊
        - onInstall␊
        - onPostInstall␊
        - onPreBuild␊
        - onBuild␊
        - onPostBuild␊
        - onPreFunctionsBuild␊
        - onFunctionsBuild␊
        - onPostFunctionsBuild␊
        - onPreFunctionsPackage␊
        - onFunctionsPackage␊
        - onPostFunctionsPackage␊
        - onPreDeploy␊
        - onPreSaveCache␊
        - onSaveCache␊
        - onPostSaveCache␊
        - onSuccess␊
        - onError␊
        - onEnd␊
    ␊
      Invalid syntax␊
    ␊
        build: lifecycle: onBuild: onBuild␊
            unknown: test␊
    ␊
      Valid syntax␊
    ␊
        build: publish: publish␊
          lifecycle: onBuild: npm run build␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.lifecycle: object

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.lifecycle must be a plain object.␊
    ␊
      Invalid syntax␊
    ␊
        build: lifecycle: true␊
    ␊
      Valid syntax␊
    ␊
        build: publish: publish␊
          lifecycle: onBuild: npm run build␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.lifecycle: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.lifecycle.onBuild must be a string or an array of strings.␊
    ␊
      Invalid syntax␊
    ␊
        build: lifecycle: onBuild: true␊
    ␊
      Valid syntax␊
    ␊
        build: lifecycle: onInit: onInit␊
            onBuild:␊
              - npm run build␊
              - npm test␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build.publish: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build.publish must be a string.␊
    ␊
      Invalid syntax␊
    ␊
        build: publish: true␊
    ␊
      Valid syntax␊
    ␊
        build: publish: dist␊
          lifecycle: {}␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## build: object

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property build must be a plain object.␊
    ␊
      Invalid syntax␊
    ␊
        build: true␊
    ␊
      Valid syntax␊
    ␊
        build: lifecycle: onBuild: npm run build␊
        plugins: []␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any.config: object

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0].config must be a plain object.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - config: true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - package: netlify-plugin-one␊
            config: port: 80␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any.enabled: boolean

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0].enabled must be a boolean.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - enabled: 0␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - package: netlify-plugin-one␊
            enabled: false␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any.id: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0].id must be an string.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - id: true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - id: one␊
            package: test␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any.package: required

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0] "package" property is required.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - enabled: true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - enabled: true␊
            package: netlify-plugin-one␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any.package: string

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0].package must be a string.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - package: true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - package: netlify-plugin-one␊
            enabled: true␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins.any: unknown property

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins[0] has unknown properties. Valid properties are:␊
        - id␊
        - package␊
        - enabled␊
        - config␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - test: true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - id: one␊
            package: netlify-plugin-one␊
            enabled: false␊
            config: port: 80␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins: not array

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins must be an array of objects.␊
    ␊
      Invalid syntax␊
    ␊
        plugins: {}␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - package: netlify-plugin-one␊
          - package: netlify-plugin-two␊
        build: {}␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `

## plugins: not array of objects

> Snapshot 1

    `␊
    > Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    > Flags␊
    { config: '/file/path' }␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      When resolving config file /file/path␊
      Configuration property plugins must be an array of objects.␊
    ␊
      Invalid syntax␊
    ␊
        plugins:␊
          - true␊
    ␊
      Valid syntax␊
    ␊
        plugins:␊
          - package: netlify-plugin-one␊
          - package: netlify-plugin-two␊
        build: {}␊
    ␊
    ┌─────────────────────────────┐␊
    │   END Configuration error   │␊
    └─────────────────────────────┘␊
    `
