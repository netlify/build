# Snapshot report for `packages/build/tests/core/lifecycle_end/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## numbering

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onEnd: echo onEnd␊
          onError: echo onEnd␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onError completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────────────────────────────┐␊
    │ 3. build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onBuild" command:␊
      node --invalid␊
    ␊
    ␊
    node: bad option: --invalid`

## onEnd + onError failure

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onEnd: echo onEnd␊
          onError: node --invalid-again␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid-again␊
    ␊
    ┌───────────────────────────────────────────────────────────────┐␊
    │ 3. build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid-again␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onError" command:␊
      node --invalid-again␊
    ␊
    ␊
    node: bad option: --invalid␊
    node: bad option: --invalid-again`

## onEnd + onError success

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onEnd: echo onEnd␊
          onError: echo onError␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onError␊
    onError␊
    ␊
    (build.lifecycle.onError completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────────────────────────────┐␊
    │ 3. build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onBuild" command:␊
      node --invalid␊
    ␊
    ␊
    node: bad option: --invalid`

## onEnd on failure

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onEnd: echo onEnd␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌───────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onBuild" command:␊
      node --invalid␊
    ␊
    ␊
    node: bad option: --invalid`

## onEnd on success

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --version␊
          onEnd: echo onEnd␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --version␊
    v1.0.0␊
    ␊
    (build.lifecycle.onBuild completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onEnd␊
    onEnd␊
    ␊
    (build.lifecycle.onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## onEnd several

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
      plugins:␊
        - package: /file/path␊
        - package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌───────────────────────────────────────────┐␊
    │ 2. onEnd command from /file/path │␊
    └───────────────────────────────────────────┘␊
    ␊
    Plugin invalid␊
    ␊
    ┌─────────────────────────────────────────┐␊
    │ 3. onEnd command from /file/path │␊
    └─────────────────────────────────────────┘␊
    ␊
    Plugin valid␊
    ␊
    (/file/path onEnd completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: Plugin invalid test␊
    ␊
    > Plugin details␊
      ID:             /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
    > Error location␊
      In "onEnd" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ␊
    node: bad option: --invalid`

## onError lifecycle

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onError: echo onError␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onError␊
    onError␊
    ␊
    (build.lifecycle.onError completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onBuild" command:␊
      node --invalid␊
    ␊
    ␊
    node: bad option: --invalid`

## onError on success

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --version␊
          onError: echo onError␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --version␊
    v1.0.0␊
    ␊
    (build.lifecycle.onBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## onError plugin event handler

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      plugins:␊
        - package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 1. onBuild command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    test␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ 2. onError command from /file/path │␊
    └─────────────────────────────────────┘␊
    ␊
    TestError␊
    test␊
    TestError: test␊
    STACK TRACE␊
    ␊
    (/file/path onError completed in 1ms)␊
    ␊
    ┌─────────────────────────────────────┐␊
    │ Plugin "/file/path" internal error │␊
    └─────────────────────────────────────┘␊
    ␊
    > Error message␊
      TestError: test␊
    ␊
    > Plugin details␊
      ID:             /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
    > Error location␊
      In "onBuild" event in local plugin "/file/path"␊
    STACK TRACE␊
    `

## onError several

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
      plugins:␊
        - package: /file/path␊
        - package: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - /file/path␊
       - /file/path␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────────────────────┐␊
    │ 2. onError command from /file/path │␊
    └─────────────────────────────────────────────┘␊
    ␊
    Plugin invalid␊
    ␊
    ┌───────────────────────────────────────────┐␊
    │ 3. onError command from /file/path │␊
    └───────────────────────────────────────────┘␊
    ␊
    Command failed with exit code 9: node --invalid␊
    ␊
    (/file/path onError completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Error: Plugin invalid test␊
    ␊
    > Plugin details␊
      ID:             /file/path␊
      Version:        1.0.0␊
      Repository:     git+https://github.com/netlify/build.git␊
      npm link:       https://www.npmjs.com/package/@netlify/build␊
      Report issues:  https://github.com/netlify/build/issues␊
    ␊
    > Error location␊
      In "onError" event in local plugin "/file/path"␊
    STACK TRACE␊
    ␊
    ␊
    node: bad option: --invalid`

## onSuccess on failure

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --invalid␊
          onSuccess: echo onSuccess␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --invalid␊
    ␊
    ┌─────────────────────────────┐␊
    │        Build failed         │␊
    └─────────────────────────────┘␊
    ␊
    > Error message␊
      Command failed with exit code 9: node --invalid␊
    ␊
    > Error location␊
      In configuration "build.lifecycle.onBuild" command:␊
      node --invalid␊
    ␊
    ␊
    node: bad option: --invalid`

## onSuccess on success

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        lifecycle:␊
          onBuild: node --version␊
          onSuccess: echo onSuccess␊
    ␊
    > Context␊
      production␊
    ␊
    ␊
    ┌─────────────────────────────────────────────────────────────────┐␊
    │ 1. build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────┘␊
    ␊
    $ node --version␊
    v1.0.0␊
    ␊
    (build.lifecycle.onBuild completed in 1ms)␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 2. build.lifecycle.onSuccess command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    $ echo onSuccess␊
    onSuccess␊
    ␊
    (build.lifecycle.onSuccess completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`
