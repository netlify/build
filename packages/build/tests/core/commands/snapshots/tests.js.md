# Snapshot report for `packages/build/tests/core/commands/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## onEnd + onError failure

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid-again"␊
    node: bad option: --invalid-again␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onEnd"␊
    onEnd␊
    ␊
     √  build.lifecycle.onEnd completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onError" command "node --invalid-again":␊
    Command failed with exit code 9: node --invalid-again␊
    `

## onEnd + onError success

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onError"␊
    onError␊
    ␊
     √  build.lifecycle.onError completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onEnd"␊
    onEnd␊
    ␊
     √  build.lifecycle.onEnd completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onBuild" command "node --invalid":␊
    Command failed with exit code 9: node --invalid␊
    `

## onEnd on failure

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onEnd"␊
    onEnd␊
    ␊
     √  build.lifecycle.onEnd completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onBuild" command "node --invalid":␊
    Command failed with exit code 9: node --invalid␊
    `

## onEnd on success

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --version"␊
    v1.0.0␊
    ␊
     √  build.lifecycle.onBuild completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onFunctionsPackage command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onFunctionsPackage completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 4. Running onSaveCache command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onSaveCache completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onEnd command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onEnd"␊
    onEnd␊
    ␊
     √  build.lifecycle.onEnd completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## onEnd several

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from /file/path␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 6 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌──────────────────────────────────────────────────────┐␊
    │ 1. Running onEnd command from netlify-plugin-invalid │␊
    └──────────────────────────────────────────────────────┘␊
    ␊
    Plugin invalid␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 2. Running onEnd command from netlify-plugin-valid │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    Plugin valid␊
    ␊
     √  netlify-plugin-valid.onEnd completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onEnd" command from "netlify-plugin-invalid":␊
    Error: Plugin invalid test␊
    STACK TRACE␊
    `

## onError lifecycle

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 1. Running build.lifecycle.onError command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onError"␊
    onError␊
    ␊
     √  build.lifecycle.onError completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onBuild" command "node --invalid":␊
    Command failed with exit code 9: node --invalid␊
    `

## onError on success

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --version"␊
    v1.0.0␊
    ␊
     √  build.lifecycle.onBuild completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onFunctionsPackage command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onFunctionsPackage completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 4. Running onSaveCache command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onSaveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## onError plugin event handler

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────┐␊
    │ 2. Running onBuild command from netlify-plugin-test │␊
    └─────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
    ┌─────────────────────────────────────────────────────┐␊
    │ 1. Running onError command from netlify-plugin-test │␊
    └─────────────────────────────────────────────────────┘␊
    ␊
    Error␊
    In "onBuild" command from "netlify-plugin-test":␊
    TestError: test␊
    STACK TRACE␊
    Error: In "onBuild" command from "netlify-plugin-test":␊
    TestError: test␊
    STACK TRACE␊
    ␊
     √  netlify-plugin-test.onError completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onBuild" command from "netlify-plugin-test":␊
    TestError: test␊
    STACK TRACE␊
    `

## onError several

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from /file/path␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 4 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌────────────────────────────────────────────────────────┐␊
    │ 1. Running onError command from netlify-plugin-invalid │␊
    └────────────────────────────────────────────────────────┘␊
    ␊
    Plugin invalid␊
    ␊
    ┌──────────────────────────────────────────────────────┐␊
    │ 2. Running onError command from netlify-plugin-valid │␊
    └──────────────────────────────────────────────────────┘␊
    ␊
    In "onBuild" command "node --invalid":␊
    Command failed with exit code 9: node --invalid␊
    ␊
     √  netlify-plugin-valid.onError completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onError" command from "netlify-plugin-invalid":␊
    Error: Plugin invalid test␊
    STACK TRACE␊
    `

## onSuccess on failure

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --invalid"␊
    node: bad option: --invalid␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "onBuild" command "node --invalid":␊
    Command failed with exit code 9: node --invalid␊
    `

## onSuccess on success

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Flags␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 5 commands. Lets do this!␊
    ␊
    ┌──────────────────────────────────────────────────────────────────┐␊
    │ 1. Running onInstall command from @netlify/plugin-functions-core │␊
    └──────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onInstall completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────────────────────────┐␊
    │ 2. Running build.lifecycle.onBuild command from netlify.yml config file │␊
    └─────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "node --version"␊
    v1.0.0␊
    ␊
     √  build.lifecycle.onBuild completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 3. Running onFunctionsPackage command from @netlify/plugin-functions-core │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
     √  @netlify/plugin-functions-core.onFunctionsPackage completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 4. Running onSaveCache command from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.onSaveCache completed in 1ms␊
    ␊
    ┌───────────────────────────────────────────────────────────────────────────┐␊
    │ 5. Running build.lifecycle.onSuccess command from netlify.yml config file │␊
    └───────────────────────────────────────────────────────────────────────────┘␊
    ␊
    Running command "echo onSuccess"␊
    onSuccess␊
    ␊
     √  build.lifecycle.onSuccess completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `
