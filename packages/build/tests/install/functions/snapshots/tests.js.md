# Snapshot report for `packages/build/tests/install/functions/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## Functions: ignore package.json inside node_modules

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in .netlify/functions/␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies nested

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    No functions were packaged␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies with Yarn in CI with lock file

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      mode: buildbot␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in /file/path␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies with Yarn locally with lock file

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in .netlify/functions/␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies with npm in CI with lock file

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      mode: buildbot␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in /file/path␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies with npm in CI with no lock file

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      mode: buildbot␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in /file/path␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies with npm locally with lock file

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
      plugins:␊
        - inputs: {}␊
          origin: config␊
          package: '@netlify/plugin-functions-install-core'␊
    ␊
    > Context␊
      production␊
    ␊
    > Loading plugins␊
       - @netlify/plugin-functions-install-core@1.0.0 from core␊
       - @netlify/plugin-functions-core@1.0.0 from core␊
    ␊
    ┌───────────────────────────────────────────────────────────────────┐␊
    │ 1. onPreBuild command from @netlify/plugin-functions-install-core │␊
    └───────────────────────────────────────────────────────────────────┘␊
    ␊
    Installing functions dependencies␊
    ␊
    (@netlify/plugin-functions-install-core onPreBuild completed in 1ms)␊
    ␊
    ┌────────────────────────────────────────────────────────────┐␊
    │ 2. onPostBuild command from @netlify/plugin-functions-core │␊
    └────────────────────────────────────────────────────────────┘␊
    ␊
    Packaging functions from functions␊
    Functions packaged in .netlify/functions/␊
     - test.zip␊
    ␊
    (@netlify/plugin-functions-core onPostBuild completed in 1ms)␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
    (Netlify Build completed in 1ms)`

## Functions: install dependencies without using the plugin prints a warning

> Snapshot 1

    `␊
    ┌─────────────────────────────┐␊
    │        Netlify Build        │␊
    └─────────────────────────────┘␊
    ␊
    > Version␊
      @netlify/build 1.0.0␊
    ␊
    > Flags␊
      repositoryRoot: /file/path␊
    ␊
    > Current directory␊
      /file/path␊
    ␊
    > Config file␊
      /file/path␊
    ␊
    > Resolved config␊
      build:␊
        functions: /file/path␊
    ␊
    > Context␊
      production␊
    ␊
    ┌─────────────────────────────┐␊
    │     Configuration error     │␊
    └─────────────────────────────┘␊
    ␊
      Error message␊
      Please use the plugin "@netlify/plugin-functions-install-core" to install dependencies from the "package.json" inside your "functions" directory.␊
      Example "netlify.toml":␊
    ␊
        [build]␊
        functions = "functions"␊
    ␊
        [[plugins]]␊
        package = "@netlify/plugin-functions-install-core"␊
    ␊
      Resolved config␊
      build:␊
        functions: /file/path`
