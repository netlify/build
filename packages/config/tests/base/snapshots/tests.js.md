# Snapshot report for `packages/config/tests/base/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## Base directory does not exist

> Snapshot 1

    'Base directory does not exist: packages/config/tests/base/fixtures/base_invalid/doesNotExist'

## Base from configuration file property

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/prop_config/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/prop_config/base",␊
          "command": "echo commandBase",␊
          "commandOrigin": "config",␊
          "edge_handlers": "packages/config/tests/base/fixtures/prop_config/base/edge-handlers",␊
          "environment": {},␊
          "functions": "packages/config/tests/base/fixtures/prop_config/base/functions",␊
          "publish": "packages/config/tests/base/fixtures/prop_config/base/publish"␊
        },␊
        "functions": {},␊
        "functionsDirectory": "packages/config/tests/base/fixtures/prop_config/base/functions",␊
        "functionsDirectoryOrigin": "config",␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/prop_config/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/prop_config",␊
      "siteInfo": {}␊
    }`

## Base from defaultConfig

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/default_config/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/default_config/base",␊
          "command": "echo commandBase",␊
          "commandOrigin": "config",␊
          "environment": {},␊
          "publish": "packages/config/tests/base/fixtures/default_config/base"␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/default_config/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/default_config",␊
      "siteInfo": {}␊
    }`

## Base logic is not recursive

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/recursive/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/recursive/base",␊
          "command": "echo commandBase",␊
          "commandOrigin": "config",␊
          "environment": {},␊
          "publish": "packages/config/tests/base/fixtures/recursive/base"␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/recursive/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/recursive",␊
      "siteInfo": {}␊
    }`

## BaseRelDir feature flag

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/prop_config/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/prop_config/base",␊
          "command": "echo command",␊
          "commandOrigin": "config",␊
          "edge_handlers": "packages/config/tests/base/fixtures/prop_config/edge-handlers",␊
          "environment": {},␊
          "functions": "packages/config/tests/base/fixtures/prop_config/functions",␊
          "publish": "packages/config/tests/base/fixtures/prop_config/publish"␊
        },␊
        "functions": {},␊
        "functionsDirectory": "packages/config/tests/base/fixtures/prop_config/functions",␊
        "functionsDirectoryOrigin": "config",␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/prop_config/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/prop_config",␊
      "siteInfo": {}␊
    }`

## Does not warn when "base" is "/"

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/base_without_publish",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/base_without_publish",␊
          "environment": {}␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/base_without_publish/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/base_without_publish",␊
      "siteInfo": {}␊
    }`

## Does not warn when "base" is used with "publish"

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/base_without_publish/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/base_without_publish/base",␊
          "environment": {},␊
          "publish": "packages/config/tests/base/fixtures/base_without_publish/base"␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/base_without_publish/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/base_without_publish",␊
      "siteInfo": {}␊
    }`

## Warns when "base" is used with empty "publish"

> Snapshot 1

    `␊
    Warning: the "publish" directory was not set and will default to the repository root directory.␊
    To publish the root directory, please set the "publish" directory to "/"␊
    To publish the "base" directory instead, please set the "publish" directory to "base"␊
    ␊
    ␊
    {␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/base_without_publish/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/base_without_publish/base",␊
          "environment": {}␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/base_without_publish/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/base_without_publish",␊
      "siteInfo": {}␊
    }`

## Warns when "base" is used without "publish"

> Snapshot 1

    `␊
    Warning: the "publish" directory was not set and will default to the repository root directory.␊
    To publish the root directory, please set the "publish" directory to "/"␊
    To publish the "base" directory instead, please set the "publish" directory to "base"␊
    ␊
    ␊
    {␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/base/fixtures/base_without_publish/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/base/fixtures/base_without_publish/base",␊
          "environment": {}␊
        },␊
        "functions": {},␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/base/fixtures/base_without_publish/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/base/fixtures/base_without_publish",␊
      "siteInfo": {}␊
    }`
