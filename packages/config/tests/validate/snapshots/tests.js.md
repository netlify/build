# Snapshot report for `packages/config/tests/validate/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## Validates defaultConfig

> Snapshot 1

    `When resolving config:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = false␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## Validates inlineConfig

> Snapshot 1

    `When resolving config:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = false␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.base: parent directory

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_base_parent/netlify.toml:␊
    Configuration property build.base must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      base = "/external/path"␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      base = "base_dir"`

## build.base: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_base_string/netlify.toml:␊
    Configuration property build.base must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      base = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      base = "packages/project"`

## build.command is validated even when not used due to merging

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_command_merge/netlify.toml:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = false␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.command: array

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_command_array/netlify.toml:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = [␊
        true␊
      ]␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.command: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_command_string/netlify.toml:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.context properties are validated like top-level ones

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_context_validation/netlify.toml:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = false␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.context.CONTEXT: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_context_nested_object/netlify.toml:␊
    Configuration property context.production must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      [context]␊
      production = false␊
    ␊
    Valid syntax␊
    ␊
      [context]␊
    ␊
        [context.production]␊
        publish = "dist"`

## build.context: nested property

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_context_nested_property/netlify.toml:␊
    Configuration property build.command must be a string␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      command = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## build.context: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_context_object/netlify.toml:␊
    Configuration property context must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      context = false␊
    ␊
    Valid syntax␊
    ␊
      [context]␊
    ␊
        [context.production]␊
        publish = "dist"`

## build.context: property

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_context_property/netlify.toml:␊
    Configuration property build.base must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      base = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      base = "packages/project"`

## build.edge_handlers: parent directory

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_edge_handlers_parent/netlify.toml:␊
    Configuration property build.edge_handlers must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      edge_handlers = "/external/path"␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      edge_handlers = "edge_handlers_dir"`

## build.edge_handlers: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_edge_handlers_string/netlify.toml:␊
    Configuration property build.edge_handlers must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      edge_handlers = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      edge_handlers = "edge-handlers"`

## build.functions: parent directory

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_functions_parent/netlify.toml:␊
    Configuration property functions.directory must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
      directory = "/external/path"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
      directory = "functions_dir"`

## build.functions: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_functions_string/netlify.toml:␊
    Configuration property functions.directory must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
      directory = true␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
      directory = "my-functions"`

## build.publish: parent directory

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_publish_parent/netlify.toml:␊
    Configuration property build.publish must be inside the root directory.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      publish = "/external/path"␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      publish = "publish_dir"`

## build.publish: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_publish_string/netlify.toml:␊
    Configuration property build.publish must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [build]␊
      publish = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      publish = "dist"`

## build: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/build_object/netlify.toml:␊
    Configuration property build must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      build = true␊
    ␊
    Valid syntax␊
    ␊
      [build]␊
      command = "npm run build"`

## functions block: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_function_block/netlify.toml:␊
    Configuration property functions.my_function must be an object.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
      my_function = "I should not be a string"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
    ␊
        [functions.my_function]␊
        external_node_modules = [␊
          "module-one",␊
          "module-two"␊
        ]`

## functions.directory: defined on the main functions object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_nested_directory/netlify.toml:␊
    Configuration property functions.my-function.directory must be defined on the main `functions` object.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
    ␊
        [functions.my-function]␊
        directory = "my-function-directory"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
      directory = "my-functions"`

## functions.external_node_modules: array of strings

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_external_modules/netlify.toml:␊
    Configuration property functions.*.external_node_modules must be an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        external_node_modules = "not-an-array"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        external_node_modules = [␊
          "module-one",␊
          "module-two"␊
        ]`

## functions.ignored_node_modules: array of strings

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_ignored_modules/netlify.toml:␊
    Configuration property functions.*.ignored_node_modules must be an array of strings.␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        ignored_node_modules = 123456.0␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        ignored_node_modules = [␊
          "module-one",␊
          "module-two"␊
        ]`

## functions.node_bundler: one of supported bundlers

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_node_bundler/netlify.toml:␊
    Configuration property functions.*.node_bundler must be one of: esbuild, zisi␊
    ␊
    Invalid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        node_bundler = "magicpack"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
    ␊
        [functions."*"]␊
        node_bundler = "esbuild"`

## functions: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/function_config_invalid_root/netlify.toml:␊
    Configuration property functions must be an object.␊
    ␊
    Invalid syntax␊
    ␊
      functions = "uh-oh! I am not an object"␊
    ␊
    Valid syntax␊
    ␊
      [functions]␊
      external_node_modules = [␊
        "module-one",␊
        "module-two"␊
      ]`

## plugins.any.enabled removed

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_enabled/netlify.toml:␊
    Configuration property plugins[0] has unknown properties. Valid properties are:␊
      - package␊
      - inputs␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      enabled = true␊
      package = "./plugin.js"␊
      origin = "config"␊
    ␊
        [plugins.inputs]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
        [plugins.inputs]␊
        port = 80.0`

## plugins.any.id backward compatibility

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_id_compat/netlify.toml:␊
    Configuration property plugins[0] has unknown properties. Valid properties are:␊
      - package␊
      - inputs␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      id = "test"␊
      origin = "config"␊
    ␊
        [plugins.inputs]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
        [plugins.inputs]␊
        port = 80.0`

## plugins.any.inputs: object

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_inputs_object/netlify.toml:␊
    Configuration property plugins[0].inputs must be a plain object.␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      inputs = true␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
        [plugins.inputs]␊
        port = 80.0`

## plugins.any.package: required

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_package_required/netlify.toml:␊
    Configuration property plugins[0] "package" property is required.␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      origin = "config"␊
    ␊
        [plugins.inputs]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"`

## plugins.any.package: should not include a URI scheme

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_package_scheme/netlify.toml:␊
    Configuration property plugins[0].package must be a npm package name only.␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      package = "git@github.com:netlify/plugin-example.git"␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"`

## plugins.any.package: should not include a version

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_package_version/netlify.toml:␊
    Configuration property plugins[0].package must be a npm package name only.␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-example@1.0.0"␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"`

## plugins.any.package: string

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_package_string/netlify.toml:␊
    Configuration property plugins[0].package must be a string.␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      package = true␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"`

## plugins.any: unknown property

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_unknown/netlify.toml:␊
    Configuration property plugins[0] has unknown properties. Valid properties are:␊
      - package␊
      - inputs␊
    ␊
    Invalid syntax␊
    ␊
      [[plugins]]␊
      test = true␊
      origin = "config"␊
    ␊
        [plugins.inputs]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
        [plugins.inputs]␊
        port = 80.0`

## plugins: do not allow duplicates

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_duplicate/netlify.toml:␊
    Plugin "./plugin.js" must not be specified twice in netlify.toml`

## plugins: not array

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_not_array/netlify.toml:␊
    Configuration property plugins must be an array of objects.␊
    ␊
    Invalid syntax␊
    ␊
      [plugins]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-two"`

## plugins: not array of objects

> Snapshot 1

    `When resolving config file packages/config/tests/validate/fixtures/plugins_not_objects/netlify.toml:␊
    Configuration property plugins must be an array of objects.␊
    ␊
    Invalid syntax␊
    ␊
      plugins = [␊
        true␊
      ]␊
    ␊
    Valid syntax␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-one"␊
    ␊
      [[plugins]]␊
      package = "netlify-plugin-two"`
