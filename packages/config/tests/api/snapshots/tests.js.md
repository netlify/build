# Snapshot report for `packages/config/tests/api/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## --site-id

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "id": "test"␊
      }␊
    }`

## --token

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {},␊
      "token": "test"␊
    }`

## --token in CLI

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "hasApi": true,␊
      "logs": {␊
        "stderr": [],␊
        "stdout": []␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {}␊
    }`

## Build settings are not used in CI

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/base",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/base/netlify.toml",␊
      "context": "production",␊
      "env": {},␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/base",␊
      "siteInfo": {␊
        "id": "test"␊
      },␊
      "token": "test"␊
    }`

## Build settings are not used without a siteId

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/base",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/base",␊
      "siteInfo": {},␊
      "token": "test"␊
    }`

## Build settings are not used without a token

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/base",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/base",␊
      "siteInfo": {␊
        "id": "test"␊
      }␊
    }`

## Build settings can be null

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "build_settings": {␊
          "base": null,␊
          "base_rel_dir": null,␊
          "cmd": null,␊
          "dir": null,␊
          "env": null,␊
          "functions_dir": null␊
        },␊
        "id": "test",␊
        "url": "test"␊
      },␊
      "token": "test"␊
    }`

## Build settings have low merging priority

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/build_settings/other_base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/api/fixtures/build_settings/other_base",␊
          "command": "fixtureCommand",␊
          "commandOrigin": "config",␊
          "environment": {␊
            "TEST_ENV": "fixture"␊
          },␊
          "functions": "packages/config/tests/api/fixtures/build_settings/other_base/fixtureFunctions",␊
          "publish": "packages/config/tests/api/fixtures/build_settings/other_base/fixturePublish"␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "functionsDirectory": "packages/config/tests/api/fixtures/build_settings/other_base/fixtureFunctions",␊
        "functionsDirectoryOrigin": "config",␊
        "plugins": [␊
          {␊
            "inputs": {␊
              "test": true␊
            },␊
            "origin": "ui",␊
            "package": "netlify-plugin-test",␊
            "pinned_version": "1"␊
          }␊
        ]␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/build_settings/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "SITE_NAME": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test-name"␊
        },␊
        "TEST_ENV": {␊
          "sources": [␊
            "configFile",␊
            "ui"␊
          ],␊
          "value": "fixture"␊
        },␊
        "URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/build_settings",␊
      "siteInfo": {␊
        "build_settings": {␊
          "base": "base",␊
          "base_rel_dir": false,␊
          "cmd": "testCommand",␊
          "dir": "testPublish",␊
          "env": {␊
            "TEST_ENV": "test"␊
          },␊
          "functions_dir": "testFunctions"␊
        },␊
        "id": "test",␊
        "name": "test-name",␊
        "plugins": [␊
          {␊
            "inputs": {␊
              "test": true␊
            },␊
            "package": "netlify-plugin-test",␊
            "pinned_version": "1"␊
          }␊
        ],␊
        "url": "test"␊
      },␊
      "token": "test"␊
    }`

## Environment variable siteInfo API error

> Snapshot 1

    'Failed retrieving site data for site test: Bad Request. Double-check your login status with \'netlify status\' or contact support with details of your error.'

## Environment variable siteInfo CI

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {},␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "id": "test"␊
      },␊
      "token": "test"␊
    }`

## Environment variable siteInfo no siteId

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {},␊
      "token": "test"␊
    }`

## Environment variable siteInfo no token

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "id": "test"␊
      }␊
    }`

## Environment variable siteInfo offline

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "id": "test"␊
      },␊
      "token": "test"␊
    }`

## Environment variable siteInfo success

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "REPOSITORY_URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "SITE_NAME": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test-name"␊
        },␊
        "URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "build_settings": {␊
          "repo_url": "test"␊
        },␊
        "id": "test",␊
        "name": "test-name",␊
        "url": "test"␊
      },␊
      "token": "test"␊
    }`

## NETLIFY_AUTH_TOKEN environment variable

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {},␊
      "token": "test"␊
    }`

## NETLIFY_SITE_ID environment variable

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/empty",␊
      "config": {␊
        "build": {␊
          "environment": {}␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/empty/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "repositoryRoot": "packages/config/tests/api/fixtures/empty",␊
      "siteInfo": {␊
        "id": "test"␊
      }␊
    }`

## Use build settings if a siteId and token are provided

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/base/base",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/api/fixtures/base/base",␊
          "command": "testCommand",␊
          "commandOrigin": "ui",␊
          "environment": {},␊
          "functions": "packages/config/tests/api/fixtures/base/testFunctions",␊
          "publish": "packages/config/tests/api/fixtures/base/testPublish"␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "functionsDirectory": "packages/config/tests/api/fixtures/base/testFunctions",␊
        "functionsDirectoryOrigin": "ui",␊
        "plugins": [␊
          {␊
            "inputs": {␊
              "test": true␊
            },␊
            "origin": "ui",␊
            "package": "netlify-plugin-test",␊
            "pinned_version": "1"␊
          }␊
        ]␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/base/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "SITE_NAME": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test-name"␊
        },␊
        "TEST_ENV": {␊
          "sources": [␊
            "ui"␊
          ],␊
          "value": "test"␊
        },␊
        "URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/base",␊
      "siteInfo": {␊
        "build_settings": {␊
          "base": "base",␊
          "base_rel_dir": false,␊
          "cmd": "testCommand",␊
          "dir": "testPublish",␊
          "env": {␊
            "TEST_ENV": "test"␊
          },␊
          "functions_dir": "testFunctions"␊
        },␊
        "id": "test",␊
        "name": "test-name",␊
        "plugins": [␊
          {␊
            "inputs": {␊
              "test": true␊
            },␊
            "package": "netlify-plugin-test",␊
            "pinned_version": "1"␊
          }␊
        ],␊
        "url": "test"␊
      },␊
      "token": "test"␊
    }`

## baseRelDir is true if build.base is overridden

> Snapshot 1

    `{␊
      "branch": "branch",␊
      "buildDir": "packages/config/tests/api/fixtures/build_base_override/subdir",␊
      "config": {␊
        "build": {␊
          "base": "packages/config/tests/api/fixtures/build_base_override/subdir",␊
          "environment": {},␊
          "publish": "packages/config/tests/api/fixtures/build_base_override/subdir/publish"␊
        },␊
        "functions": {␊
          "*": {}␊
        },␊
        "plugins": []␊
      },␊
      "configPath": "packages/config/tests/api/fixtures/build_base_override/subdir/netlify.toml",␊
      "context": "production",␊
      "env": {␊
        "BRANCH": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "CACHED_COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "COMMIT_REF": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "HEXADECIMAL_ID"␊
        },␊
        "CONTEXT": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "production"␊
        },␊
        "GATSBY_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "HEAD": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "branch"␊
        },␊
        "LANG": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "LANGUAGE": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US:en"␊
        },␊
        "LC_ALL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "en_US.UTF-8"␊
        },␊
        "NEXT_TELEMETRY_DISABLED": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "1"␊
        },␊
        "PULL_REQUEST": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "false"␊
        },␊
        "SITE_ID": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        },␊
        "URL": {␊
          "sources": [␊
            "general"␊
          ],␊
          "value": "test"␊
        }␊
      },␊
      "hasApi": true,␊
      "repositoryRoot": "packages/config/tests/api/fixtures/build_base_override",␊
      "siteInfo": {␊
        "build_settings": {␊
          "base_rel_dir": false␊
        },␊
        "id": "test",␊
        "url": "test"␊
      },␊
      "token": "test"␊
    }`
